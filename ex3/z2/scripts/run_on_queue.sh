#!/bin/bash

## Give the Job a descriptive name
#PBS -N z2_locks_run

## Output and error files
#PBS -o z2_locks.out
#PBS -e z2_locks.err

## Limit memory, runtime etc.
#PBS -l walltime=10:00:00

## How many machines should we get?
#PBS -l nodes=sandman:ppn=64

## Start

cd /home/parallel/parlab30/a3/z2/

echo "Nthreads, Runtime(sec), Throughput(Kops/sec)"

echo "nosync"
MT_CONF=0 ./nosync 16
MT_CONF=0 ./nosync 1024
MT_CONF=0 ./nosync 8192
MT_CONF=0,1 ./nosync 16
MT_CONF=0,1 ./nosync 1024
MT_CONF=0,1 ./nosync 8192
MT_CONF=0,1,2,3 ./nosync 16
MT_CONF=0,1,2,3 ./nosync 1024
MT_CONF=0,1,2,3 ./nosync 8192
MT_CONF=0,1,2,3,4,5,6,7 ./nosync 16
MT_CONF=0,1,2,3,4,5,6,7 ./nosync 1024
MT_CONF=0,1,2,3,4,5,6,7 ./nosync 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./nosync 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./nosync 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./nosync 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./nosync 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./nosync 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./nosync 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./nosync 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./nosync 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./nosync 8192

echo "pthread"
MT_CONF=0 ./pthread 16
MT_CONF=0 ./pthread 1024
MT_CONF=0 ./pthread 8192
MT_CONF=0,1 ./pthread 16
MT_CONF=0,1 ./pthread 1024
MT_CONF=0,1 ./pthread 8192
MT_CONF=0,1,2,3 ./pthread 16
MT_CONF=0,1,2,3 ./pthread 1024
MT_CONF=0,1,2,3 ./pthread 8192
MT_CONF=0,1,2,3,4,5,6,7 ./pthread 16
MT_CONF=0,1,2,3,4,5,6,7 ./pthread 1024
MT_CONF=0,1,2,3,4,5,6,7 ./pthread 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./pthread 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./pthread 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./pthread 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./pthread 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./pthread 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./pthread 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./pthread 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./pthread 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./pthread 8192

echo "tas"
MT_CONF=0 ./tas 16
MT_CONF=0 ./tas 1024
MT_CONF=0 ./tas 8192
MT_CONF=0,1 ./tas 16
MT_CONF=0,1 ./tas 1024
MT_CONF=0,1 ./tas 8192
MT_CONF=0,1,2,3 ./tas 16
MT_CONF=0,1,2,3 ./tas 1024
MT_CONF=0,1,2,3 ./tas 8192
MT_CONF=0,1,2,3,4,5,6,7 ./tas 16
MT_CONF=0,1,2,3,4,5,6,7 ./tas 1024
MT_CONF=0,1,2,3,4,5,6,7 ./tas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./tas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./tas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./tas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./tas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./tas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./tas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./tas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./tas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./tas 8192

echo "ttas"
MT_CONF=0 ./ttas 16
MT_CONF=0 ./ttas 1024
MT_CONF=0 ./ttas 8192
MT_CONF=0,1 ./ttas 16
MT_CONF=0,1 ./ttas 1024
MT_CONF=0,1 ./ttas 8192
MT_CONF=0,1,2,3 ./ttas 16
MT_CONF=0,1,2,3 ./ttas 1024
MT_CONF=0,1,2,3 ./ttas 8192
MT_CONF=0,1,2,3,4,5,6,7 ./ttas 16
MT_CONF=0,1,2,3,4,5,6,7 ./ttas 1024
MT_CONF=0,1,2,3,4,5,6,7 ./ttas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./ttas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./ttas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./ttas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./ttas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./ttas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./ttas 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./ttas 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./ttas 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./ttas 8192

echo "array"
MT_CONF=0 ./array 16
MT_CONF=0 ./array 1024
MT_CONF=0 ./array 8192
MT_CONF=0,1 ./array 16
MT_CONF=0,1 ./array 1024
MT_CONF=0,1 ./array 8192
MT_CONF=0,1,2,3 ./array 16
MT_CONF=0,1,2,3 ./array 1024
MT_CONF=0,1,2,3 ./array 8192
MT_CONF=0,1,2,3,4,5,6,7 ./array 16
MT_CONF=0,1,2,3,4,5,6,7 ./array 1024
MT_CONF=0,1,2,3,4,5,6,7 ./array 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./array 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./array 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15 ./array 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./array 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./array 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31 ./array 8192
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./array 16
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./array 1024
MT_CONF=0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63 ./array 8192
